# Planning Document: skill-architect v5.1.0 "Restoration"

**–î–∞—Ç–∞:** 2025-12-02  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç v3.9.0 ‚Üí v5.0.0, NC Project refactor session  
**–¢–∏–ø:** MINOR (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ + –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞)

---

## Executive Summary

**–ü—Ä–æ–±–ª–µ–º–∞:** v5.0.0 –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–ª –∫–∞—á–µ—Å—Ç–≤–æ Tool Mode —Ä–∞–¥–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Project Mode.

**–†–µ—à–µ–Ω–∏–µ:** –í–∑—è—Ç—å v3.9.0 –∫–∞–∫ –±–∞–∑—É, –î–û–ë–ê–í–ò–¢–¨ Project Mode –∏ –∑–∞—â–∏—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞.

**–ü—Ä–∏–Ω—Ü–∏–ø:** ADD, never REPLACE.

---

## –ê–Ω–∞–ª–∏–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ v3.9.0 ‚Üí v5.0.0

### –ß—Ç–æ –±—ã–ª–æ –≤ v3.9.0 (223 —Å—Ç—Ä–æ–∫–∏, –†–ê–ë–û–¢–ê–õ–û)

| # | –°–µ–∫—Ü–∏—è | –°—Ç—Ä–æ–∫–∏ | –°—Ç–∞—Ç—É—Å –≤ v5.0.0 |
|---|--------|--------|-----------------|
| 1 | Activation | 4 | ‚ùå –£–î–ê–õ–ï–ù–û |
| 2 | Config | 4 | ‚ùå –£–î–ê–õ–ï–ù–û |
| 3 | Clean Skill Principles | 10 | ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ |
| 4 | 5-Phase Process | 10 | ‚ö†Ô∏è –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ Unified |
| 5 | Planning Document ‚Äî BLOCKING | 11 | ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ |
| 6 | **REFACTOR Protocol** | 18 | ‚ùå –£–î–ê–õ–ï–ù–û |
| 7 | **UPDATE Protocol** | 14 | ‚ùå –£–î–ê–õ–ï–ù–û |
| 8 | Required Files | 22 | ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ (–∏–∑–º–µ–Ω–µ–Ω–æ) |
| 9 | Validation & Packaging | 9 | ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ |
| 10 | **Diff Report ‚Äî BLOCKING** | 17 | ‚ùå –£–î–ê–õ–ï–ù–û |
| 11 | Versioning | 8 | ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ |
| 12 | Context Tracking | 8 | ‚ö†Ô∏è –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ |
| 13 | **Critical Rules** | 11 | ‚ùå –£–î–ê–õ–ï–ù–û |
| 14 | Resources | 10 | ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ (—Ä–∞—Å—à–∏—Ä–µ–Ω–æ) |

### –ü–æ—Ç–µ—Ä—è–Ω–æ: 60+ —Å—Ç—Ä–æ–∫ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏

| –°–µ–∫—Ü–∏—è | –ß—Ç–æ –ø–æ—Ç–µ—Ä—è–Ω–æ | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è |
|--------|--------------|-------------|
| REFACTOR Protocol | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ bash –∫–æ–º–∞–Ω–¥—ã, 5-step –ø—Ä–æ—Ü–µ—Å—Å | Claude –Ω–µ –∑–Ω–∞–µ—Ç –ö–ê–ö —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å |
| UPDATE Protocol | Snapshot –∫–æ–º–∞–Ω–¥—ã, –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞ | Claude –Ω–µ –∑–Ω–∞–µ—Ç –ö–ê–ö –æ–±–Ω–æ–≤–ª—è—Ç—å |
| Diff Report | –§–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–∞, "Deviation from plan" | Claude –Ω–µ –æ—Ç—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| Critical Rules | 7 –ø—Ä–∞–≤–∏–ª –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π | –ù–µ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ —á–µ–∫–ª–∏—Å—Ç–∞ |
| Activation | "Skill Architect ready. Purpose?" | –ù–µ—Ç —á—ë—Ç–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ |
| Config | "Ask: Purpose? Triggers?" | Claude –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è |

### –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ v5.0.0 (—Ö–æ—Ä–æ—à–µ–µ)

| –°–µ–∫—Ü–∏—è | –°—Ç—Ä–æ–∫–∏ | –¶–µ–Ω–Ω–æ—Å—Ç—å |
|--------|--------|----------|
| Modes (Tool/Project) | 12 | ‚úÖ –ù—É–∂–Ω–æ ‚Äî dual mode |
| PRE-BUILD CHECKPOINT | 12 | ‚úÖ –ù—É–∂–Ω–æ ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç drift |
| Delivery Protocol ‚Äî 3 Steps | 15 | ‚úÖ –ù—É–∂–Ω–æ ‚Äî —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è |
| Quick Start | 15 | ‚úÖ –ù—É–∂–Ω–æ ‚Äî –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ |
| Project Mode –≤ Resources | 8 | ‚úÖ –ù—É–∂–Ω–æ ‚Äî —Å—Å—ã–ª–∫–∏ |

### –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ v5.0.0 (–ø–ª–æ—Ö–æ–µ)

| –°–µ–∫—Ü–∏—è | –ü—Ä–æ–±–ª–µ–º–∞ |
|--------|----------|
| Unified Workflow | –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏. –ó–∞–º–µ–Ω–∏–ª 2 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –Ω–∞ 1 —Ç–∞–±–ª–∏—Ü—É. |

---

## KEEP (–Ω–µ —Ç—Ä–æ–≥–∞—Ç—å)

### –ò–∑ v3.9.0 ‚Äî –í–ï–†–ù–£–¢–¨

```
‚ñ° Activation ‚Äî "Skill Architect ready. Purpose?"
‚ñ° Config ‚Äî "Ask: Purpose? Triggers?"
‚ñ° REFACTOR Protocol ‚Äî –ø–æ–ª–Ω—ã–π, 18 —Å—Ç—Ä–æ–∫
‚ñ° UPDATE Protocol ‚Äî –ø–æ–ª–Ω—ã–π, 14 —Å—Ç—Ä–æ–∫
‚ñ° Diff Report ‚Äî BLOCKING ‚Äî —Å —Ñ–æ—Ä–º–∞—Ç–æ–º
‚ñ° Critical Rules table ‚Äî 7 –ø—Ä–∞–≤–∏–ª
‚ñ° Context Tracking —Ñ–æ—Ä–º–∞—Ç
```

### –ò–∑ v5.0.0 ‚Äî –°–û–•–†–ê–ù–ò–¢–¨

```
‚ñ° Quick Start (—Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–ª—è Project Mode)
‚ñ° Modes table (Tool/Project)
‚ñ° PRE-BUILD CHECKPOINT
‚ñ° Delivery Protocol ‚Äî 3 Steps
‚ñ° Project Mode –≤ Resources
‚ñ° validate-naming.sh –≤ –∫–æ–º–∞–Ω–¥–∞—Ö
```

---

## REMOVE (—É–¥–∞–ª–∏—Ç—å)

```
‚ñ° Unified Workflow table ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ 5-Phase Process + –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
‚ñ° Self-Test (Run on Activation) ‚Äî –∏–∑–±—ã—Ç–æ—á–Ω–æ, Context Tracking –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
```

---

## ADD (–¥–æ–±–∞–≤–∏—Ç—å)

### –ù–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞—â–∏—Ç—ã

```markdown
## ‚õî NEVER DEGRADE

Before ANY change to existing protocol:

1. **Does this REMOVE working functionality?** ‚Üí STOP
2. **Does this REPLACE specific with abstract?** ‚Üí STOP  
3. **No space?** ‚Üí Move to reference/, never delete
4. **New feature?** ‚Üí ADD alongside, don't merge

Violation = BLOCKING. Requires explicit user override.
```

### Reference Reading Trigger (–∏–∑ PATCH)

```markdown
## ‚ö†Ô∏è MANDATORY: Reference Reading

BEFORE any action, read relevant reference files:

| Trigger | Read First |
|---------|------------|
| "project" keyword | `reference/project-mode.md` |
| "create skill" | `reference/templates.md` |
| "refactor" / "update" | `reference/planning-document.md` |
| Packaging | `reference/packaging.md` |

Rule: First tool call = file_read on reference file. Always.
```

### Project Mode additions

```markdown
### REFACTOR (Project Mode)

Trigger: `refactor` + project skill attachment

Process:
1. Audit ‚Äî duplicates, SSOT violations
2. Plan ‚Äî KEEP/REMOVE/ADD + line savings
3. Confirm ‚Äî wait explicit
4. Execute ‚Äî apply changes
5. Validate ‚Äî check SSOT integrity
6. Deliver ‚Äî package + report savings
```

### SSOT Rules (–≤ reference/project-mode.md)

```markdown
## SSOT Rules for data/

Each fact exists in ONE module only. Others REFERENCE it.

| Data Type | SSOT Location |
|-----------|---------------|
| Core formula | core.yaml |
| Definitions | glossary.md |
| Examples | domain module |

Reference syntax: `(‚Üí source.md)`
```

---

## –§–∞–π–ª—ã –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

### SKILL.md ‚Äî –ø–æ–ª–Ω–∞—è —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ü–µ–ª–µ–≤–∞—è ~250 —Å—Ç—Ä–æ–∫):**

```
1. Frontmatter
2. Title + description
3. ‚õî NEVER DEGRADE (NEW)
4. ‚ö†Ô∏è MANDATORY: Reference Reading (NEW)
5. ‚ö†Ô∏è MANDATORY: Context Tracking
6. Quick Start (Tool + Project)
7. Activation (RESTORE from v3.9.0)
8. Config (RESTORE from v3.9.0)
9. Modes (KEEP from v5.0.0)
10. 5-Phase Process (RESTORE from v3.9.0)
11. Planning Document ‚Äî BLOCKING
12. ‚ö†Ô∏è PRE-BUILD CHECKPOINT
13. REFACTOR Protocol (RESTORE from v3.9.0)
14. UPDATE Protocol (RESTORE from v3.9.0)
15. Delivery Protocol ‚Äî 3 Steps
16. Diff Report ‚Äî BLOCKING (RESTORE from v3.9.0)
17. Clean Skill Principles
18. Required Files
19. Validation & Packaging
20. Critical Rules (RESTORE from v3.9.0)
21. Versioning
22. Resources (expanded)
```

### reference/project-mode.md

```
+ REFACTOR (Project Mode) section
+ SSOT Rules for data/ section
```

### reference/packaging.md

```
+ Frontmatter Schema section (allowed keys)
```

### reference/templates.md

```
+ Frontmatter Rules note
```

### reference/quality-checklist.md

```
FIX: 350 ‚Üí 300 (sync with SKILL.md)
FIX: footer version ‚Üí v5.1.0
```

### reference/workflow.md

```
FIX: 350 ‚Üí 300
FIX: Token Counter format ‚Üí üü° -[cost] | ~[remaining] üü¢
FIX: footer version ‚Üí v5.1.0
```

### reference/engines.md

```
FIX: footer version ‚Üí v5.1.0
```

### scripts/validate-skill.sh

```
FIX: MANIFEST parsing bug (line 64-79)
```

### scripts/audit-project.sh (NEW)

```
Project Mode audit script
```

### MANIFEST.md

```
UPDATE: version, file count, new script
```

---

## –†–∞–∑–º–µ—Ä –æ—Ü–µ–Ω–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫–∏ |
|-----------|--------|
| v3.9.0 –±–∞–∑–∞ | 223 |
| + Project Quick Start | +8 |
| + Modes table | +12 |
| + PRE-BUILD CHECKPOINT | +12 |
| + Delivery Protocol | +15 |
| + NEVER DEGRADE | +10 |
| + Reference Reading | +10 |
| - 5-Phase (move to reference) | -10 |
| - MANIFEST example (move to reference) | -15 |
| **–ò–¢–û–ì–û** | ~265 —Å—Ç—Ä–æ–∫ |

‚úÖ –í —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–∞ 300.

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

```
‚ñ° –í—Å–µ —Å–µ–∫—Ü–∏–∏ –∏–∑ v3.9.0 –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç?
‚ñ° REFACTOR Protocol –ø–æ–ª–Ω—ã–π (18 —Å—Ç—Ä–æ–∫)?
‚ñ° UPDATE Protocol –ø–æ–ª–Ω—ã–π (14 —Å—Ç—Ä–æ–∫)?
‚ñ° Diff Report —Å —Ñ–æ—Ä–º–∞—Ç–æ–º?
‚ñ° Critical Rules table?
‚ñ° Project Mode –î–û–ë–ê–í–õ–ï–ù, –Ω–µ –∑–∞–º–µ–Ω–∏–ª?
‚ñ° NEVER DEGRADE –ø—Ä–∞–≤–∏–ª–æ –µ—Å—Ç—å?
‚ñ° Reference Reading trigger –µ—Å—Ç—å?
‚ñ° –í—Å–µ reference/ —Ñ–∞–π–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã?
‚ñ° validate-skill.sh –±–∞–≥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω?
```

---

## Chat Verification

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏–∑ —á–∞—Ç–∞:
1. ‚úÖ Self-audit: –±–∞–≥ validate-skill.sh
2. ‚úÖ Self-audit: 300 vs 350 —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω
3. ‚úÖ Self-audit: Token Counter —Ñ–æ—Ä–º–∞—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω
4. ‚úÖ Self-audit: footer –≤–µ—Ä—Å–∏–∏ —É—Å—Ç–∞—Ä–µ–ª–∏
5. ‚úÖ Self-audit: –Ω–µ—Ç CHANGELOG.md –≤ skill
6. ‚úÖ PATCH: Reference Reading trigger
7. ‚úÖ PATCH: SSOT Rules
8. ‚úÖ PATCH: Project REFACTOR mode
9. ‚úÖ PATCH: audit-project.sh
10. ‚úÖ PATCH: Frontmatter Schema
11. ‚úÖ –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞: –ø–æ—Ç–µ—Ä—è REFACTOR/UPDATE –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
12. ‚úÖ –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞: –ø–æ—Ç–µ—Ä—è Diff Report
13. ‚úÖ –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞: –ø–æ—Ç–µ—Ä—è Critical Rules
14. ‚úÖ –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞: –ø–æ—Ç–µ—Ä—è Activation/Config
15. ‚úÖ –ù–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ: NEVER DEGRADE

**Verified: 15 items. Missing: none.**

---

## Changelog Entry (draft)

```markdown
### v5.1.0 "Restoration" (2025-12-02)

**RESTORED from v3.9.0:**
- Activation section
- Config section  
- REFACTOR Protocol (full, 18 lines)
- UPDATE Protocol (full, 14 lines)
- Diff Report ‚Äî BLOCKING (with format)
- Critical Rules table

**ADDED:**
- ‚õî NEVER DEGRADE rule (protection against simplification)
- Reference Reading trigger (mandatory file_read before action)
- Project REFACTOR mode in project-mode.md
- SSOT Rules for data/ in project-mode.md
- Frontmatter Schema in packaging.md
- scripts/audit-project.sh

**FIXED:**
- validate-skill.sh MANIFEST parsing bug
- 350 ‚Üí 300 line limit sync across all files
- Token Counter format sync
- Footer versions updated to v5.1.0

**REMOVED:**
- Unified Workflow abstraction (replaced with specific protocols)
- Self-Test section (redundant with Context Tracking)

**PRESERVED from v5.0.0:**
- Project Mode (Modes table, triggers, resources)
- Quick Start
- PRE-BUILD CHECKPOINT
- Delivery Protocol ‚Äî 3 Steps
```

---

## –†–∏—Å–∫–∏

| –†–∏—Å–∫ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-----------|
| SKILL.md > 300 —Å—Ç—Ä–æ–∫ | –í—ã–Ω–µ—Å—Ç–∏ 5-Phase, MANIFEST example –≤ reference/ |
| –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ v3.9.0 | Diff –ø—Ä–æ—Ç–∏–≤ v3.9.0 –ø–æ—Å–ª–µ build |
| –°–ª–æ–º–∞—Ç—å Project Mode | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞ —Ä–µ–∂–∏–º–∞ |

---

## –ì–æ—Ç–æ–≤ –∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é

**–û–∂–∏–¥–∞—é:** —è–≤–Ω–æ–µ "–¥–∞" / "go" / "proceed"

–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
1. –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π SKILL.md
2. –û–±–Ω–æ–≤–ª—è—é reference/ —Ñ–∞–π–ª—ã
3. –§–∏–∫—Å—é —Å–∫—Ä–∏–ø—Ç—ã
4. –í–∞–ª–∏–¥–∏—Ä—É—é
5. Diff Report
6. Deliver

---

*Planning Document v5.1.0 | skill-architect*
